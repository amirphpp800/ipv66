
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تولیدکننده آدرس IPv6</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'vazir': ['Vazirmatn', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#4F46E5', // رنگ عمیق‌تر
                            600: '#4338CA', // رنگ عمیق‌تر
                            700: '#3730A3', // رنگ عمیق‌تر
                            800: '#312E81', // رنگ عمیق‌تر
                            900: '#1E1B4B', // رنگ عمیق‌تر
                        },
                        dark: {
                            100: '#1E293B',
                            200: '#0F172A',
                            300: '#020617',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #0F172A;
            min-height: 100vh;
            transition: all 0.3s ease;
            color: #E2E8F0;
        }

        .glass-effect {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .address-card {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .address-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(79, 70, 229, 0.2), transparent);
            transform: translateX(-100%);
            transition: 0.5s;
        }

        .address-card:hover::before {
            transform: translateX(100%);
        }

        .address-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(79, 70, 229, 0.3);
        }

        code {
            cursor: pointer;
            transition: all 0.2s ease;
        }

        code:hover {
            color: #818cf8;
            text-decoration: underline;
        }

        .copy-btn {
            opacity: 0;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .address-card:hover .copy-btn {
            opacity: 1;
        }

        .copy-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        .copy-btn:active::after {
            width: 100px;
            height: 100px;
        }

        .loading {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .toast {
            animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s;
        }

        @keyframes slideIn {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        .address-type-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .address-type-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        .address-type-btn:active::after {
            width: 100px;
            height: 100px;
        }

        .btn-active {
            background-color: #4F46E5 !important;
            color: white !important;
        }

        .btn-inactive {
            background-color: #1E293B !important;
            color: #94a3b8 !important;
        }

        .btn-inactive:hover {
            background-color: #334155 !important;
        }

        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .7;
            }
        }

        .btn-primary {
            background-color: #4F46E5;
            color: white;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background-color: #4338CA;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.4);
        }

        .btn-secondary {
            background-color: #1E293B;
            color: #94a3b8;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background-color: #334155;
            transform: translateY(-1px);
        }

        .input-field {
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background-color: #1E293B;
            color: white;
            border-color: #334155;
        }

        .input-field:focus {
            border-color: #4F46E5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.4);
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-4xl mx-auto">

        <!-- Header -->
        <div class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-3 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-700">تولیدکننده آدرس IPv6</h1>
        </div>

        <!-- Main Card -->
        <div class="glass-effect rounded-2xl p-8 mb-8 shadow-xl">
            <!-- Address Type Selection -->
            <div class="mb-8">
                <label class="block text-lg font-semibold text-gray-200 mb-3">نوع آدرس</label>
                <div class="grid grid-cols-2 md:grid-cols-5 gap-3">
                    <button class="address-type-btn btn-active px-4 py-3 rounded-xl font-medium flex items-center justify-center" data-type="gaming">
                        <i class="ri-game-line ml-2 text-lg"></i>
                        گیمینگ
                    </button>
                    <button class="address-type-btn btn-inactive px-4 py-3 rounded-xl font-medium flex items-center justify-center" data-type="global">
                        <i class="ri-global-line ml-2 text-lg"></i>
                        جهانی
                    </button>
                    <button class="address-type-btn btn-inactive px-4 py-3 rounded-xl font-medium flex items-center justify-center" data-type="link-local">
                        <i class="ri-router-line ml-2 text-lg"></i>
                        محلی
                    </button>
                    <button class="address-type-btn btn-inactive px-4 py-3 rounded-xl font-medium flex items-center justify-center" data-type="unique-local">
                        <i class="ri-home-line ml-2 text-lg"></i>
                        خصوصی
                    </button>
                    <button class="address-type-btn btn-inactive px-4 py-3 rounded-xl font-medium flex items-center justify-center" data-type="random">
                        <i class="ri-shuffle-line ml-2 text-lg"></i>
                        تصادفی
                    </button>
                </div>
            </div>

            <!-- Count Input and Generate Button -->
            <div class="flex flex-col md:flex-row gap-4 items-end">
                <div class="flex-1">
                    <label class="block text-lg font-semibold text-gray-200 mb-3">تعداد آدرس‌ها</label>
                    <input type="number" id="addressCount" min="1" max="100" value="5"
                           class="w-full px-4 py-3 rounded-xl border border-gray-600 focus:outline-none input-field">
                </div>
                <button id="generateBtn" 
                        class="w-full md:w-auto px-6 py-3 btn-primary font-medium rounded-xl focus:outline-none flex items-center justify-center">
                    <i class="ri-magic-line ml-2 text-lg"></i>
                    تولید آدرس‌ها
                </button>
                <button id="copyAllBtn" 
                        class="w-full md:w-auto px-6 py-3 btn-secondary font-medium rounded-xl focus:outline-none flex items-center justify-center">
                    <i class="ri-file-copy-line ml-2 text-lg"></i>
                    کپی همه
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="resultsContainer" class="space-y-3">
            <!-- Results will be inserted here -->
        </div>

        <!-- Loading Indicator -->
        <div id="loadingIndicator" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="glass-effect p-8 rounded-2xl flex flex-col items-center">
                <div class="loading w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full"></div>
                <p class="mt-4 text-gray-300">در حال تولید آدرس‌ها...</p>
            </div>
        </div>

        <!-- Toast Container -->
        <div id="toastContainer" class="fixed bottom-4 left-4 space-y-2 z-50"></div>
    </div>

    <script>
        class IPv6Generator {
            static RANGES = {
                'global': [0x2000, 0x3FFF],
                'unique-local': [0xfc00, 0xfdff],
                'gaming': [0x2600, 0x27FF]
            };

            static PREFIXES = {
                'link-local': 'fe80',
                'gaming': '2600'
            };

            static generateSingle(type) {
                if (type in this.PREFIXES) {
                    const groups = [this.PREFIXES[type]];
                    for (let i = 0; i < 7; i++) {
                        groups.push(this.randomHex());
                    }
                    return groups.join(':');
                } else if (type in this.RANGES) {
                    const [start, end] = this.RANGES[type];
                    const firstGroup = Math.floor(Math.random() * (end - start + 1)) + start;
                    const groups = [firstGroup.toString(16)];
                    for (let i = 0; i < 7; i++) {
                        groups.push(this.randomHex());
                    }
                    return groups.join(':');
                } else {
                    const groups = Array(8).fill(0).map(() => this.randomHex());
                    return groups.join(':');
                }
            }

            static randomHex() {
                return Math.floor(Math.random() * 65536).toString(16).padStart(4, '0');
            }

            static validateAddress(addr, type) {
                try {
                    const parts = addr.split(':');
                    if (parts.length !== 8) return false;

                    if (type === 'global') {
                        const firstGroup = parseInt(parts[0], 16);
                        return firstGroup >= 0x2000 && firstGroup <= 0x3FFF;
                    } else if (type === 'link-local') {
                        return parts[0] === 'fe80';
                    } else if (type === 'unique-local') {
                        const firstGroup = parseInt(parts[0], 16);
                        return firstGroup >= 0xfc00 && firstGroup <= 0xfdff;
                    } else if (type === 'gaming') {
                        const firstGroup = parseInt(parts[0], 16);
                        return firstGroup >= 0x2600 && firstGroup <= 0x27FF;
                    }
                    return true;
                } catch {
                    return false;
                }
            }

            static async generateMultiple(count, type) {
                const addresses = new Set();
                const maxAttempts = count * 5;
                let attempts = 0;

                while (addresses.size < count && attempts < maxAttempts) {
                    const addr = this.generateSingle(type);
                    if (this.validateAddress(addr, type)) {
                        addresses.add(addr);
                    }
                    attempts++;
                    if (attempts % 10 === 0) {
                        await new Promise(resolve => setTimeout(resolve, 0));
                    }
                }

                if (addresses.size < count) {
                    throw new Error(`امکان تولید ${count} آدرس منحصر به فرد از نوع ${type} وجود ندارد`);
                }

                return Array.from(addresses);
            }
        }

        class UI {
            constructor() {
                this.selectedType = 'gaming';
                this.setupEventListeners();
                this.setupTheme();
            }

            setupTheme() {
                // تم دارک مود به صورت پیش‌فرض اعمال شده است
                document.documentElement.classList.add('dark');
            }

            setupEventListeners() {
                // Address type buttons
                document.querySelectorAll('.address-type-btn').forEach(btn => {
                    btn.addEventListener('click', () => this.setAddressType(btn));
                });

                // Generate button
                document.getElementById('generateBtn').addEventListener('click', () => this.generateAddresses());

                // Copy all button
                document.getElementById('copyAllBtn').addEventListener('click', () => this.copyAllAddresses());
            }

            setAddressType(btn) {
                document.querySelectorAll('.address-type-btn').forEach(b => {
                    b.classList.remove('btn-active');
                    b.classList.add('btn-inactive');
                });
                btn.classList.add('btn-active');
                btn.classList.remove('btn-inactive');
                this.selectedType = btn.dataset.type;
            }

            async generateAddresses() {
                const count = parseInt(document.getElementById('addressCount').value);
                if (isNaN(count) || count < 1 || count > 100) {
                    this.showToast('لطفاً عددی بین ۱ تا ۱۰۰ وارد کنید', 'error');
                    return;
                }

                this.showLoading(true);
                try {
                    const addresses = await IPv6Generator.generateMultiple(count, this.selectedType);
                    this.displayAddresses(addresses);
                    this.showToast(`${count} آدرس IPv6 با موفقیت تولید شد!`, 'success');
                } catch (error) {
                    this.showToast(error.message, 'error');
                } finally {
                    this.showLoading(false);
                }
            }

            displayAddresses(addresses) {
                const container = document.getElementById('resultsContainer');
                container.innerHTML = addresses.map((addr, index) => `
                    <div class="address-card glass-effect rounded-xl p-5 flex items-center justify-between transition-all">
                        <div class="flex items-center space-x-4 space-x-reverse">
                            <span class="text-gray-400 font-medium text-lg">${index + 1}.</span>
                            <code class="text-gray-200 font-mono text-lg cursor-pointer hover:text-primary-400 transition-all" 
                                  onclick="ui.copyAddress('${addr}')"
                                  title="برای کپی کلیک کنید">${addr}</code>
                        </div>
                        <button class="copy-btn px-4 py-2 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-all flex items-center"
                                onclick="ui.copyAddress('${addr}')">
                            <i class="ri-file-copy-line ml-1"></i>
                            کپی
                        </button>
                    </div>
                `).join('');
            }

            copyAddress(address) {
                navigator.clipboard.writeText(address).then(() => {
                    this.showToast('آدرس در کلیپ‌بورد کپی شد!', 'success');
                }).catch(() => {
                    this.showToast('خطا در کپی آدرس', 'error');
                });
            }

            copyAllAddresses() {
                const addresses = Array.from(document.querySelectorAll('.address-card code'))
                    .map(code => code.textContent)
                    .join('\n');

                if (addresses) {
                    navigator.clipboard.writeText(addresses).then(() => {
                        this.showToast('تمام آدرس‌ها در کلیپ‌بورد کپی شدند!', 'success');
                    }).catch(() => {
                        this.showToast('خطا در کپی آدرس‌ها', 'error');
                    });
                } else {
                    this.showToast('هیچ آدرسی برای کپی وجود ندارد', 'error');
                }
            }

            showLoading(show) {
                document.getElementById('loadingIndicator').classList.toggle('hidden', !show);
                document.getElementById('generateBtn').disabled = show;
            }

            showToast(message, type = 'success') {
                const toast = document.createElement('div');
                toast.className = `toast glass-effect px-4 py-3 rounded-xl shadow-xl flex items-center ${
                    type === 'success' ? 'bg-green-500' : 'bg-red-500'
                } text-white`;
                
                const icon = type === 'success' ? 'ri-checkbox-circle-line' : 'ri-error-warning-line';
                toast.innerHTML = `
                    <i class="${icon} ml-2 text-xl"></i>
                    <span class="text-sm">${message}</span>
                `;

                const container = document.getElementById('toastContainer');
                container.appendChild(toast);

                setTimeout(() => {
                    toast.remove();
                }, 3000);
            }
        }

        // Initialize UI
        const ui = new UI();
    </script>
</body>
</html>
